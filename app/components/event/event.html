<div data-ng-controller="loginctrl as loginScope">
    <div class="panel panel-success ">
        <div class="panel-heading  "><h4>{{eventCtrl.event.name}}</h4></div>
        <div class="panel-body">
            <div class="col-md-2">
                <p>Taste: {{eventCtrl.event.taste}}</p>

                <p class="text-success" data-ng-if="eventCtrl.event.edible">Edible </p>

                <p class="text-warning" data-ng-if="!eventCtrl.event.edible">Poisonous </p>
                <select ng-model="amountSelect">
                    <option value="" selected="selected">Filter by richness</option>
                    <option value="{{amount}}" ng-repeat="amount in eventCtrl.amounts">Richness {{amount}}</option>
                </select>

                <div class="panel-heading  ">
                    <h4>Click Blue marker to confirm
                    new finding location, or move and click marker to change location.
                    </h4>
                </div>
                <div ng-if="!loginScope.loginService.authorized" class="panel-heading  ">
                    <h4>To edit or delete,
                        <a href="/login">log in</a>
                    </h4>
                </div>
                <div ng-if="loginScope.loginService.authorized" class="panel-heading  ">
                    <h4>To edit and delete, click on marker, and input parameters will show</h4>
                </div>
            </div>

            <div class="col-md-10">
                <map zoom="20" click=""
                     center="current-location"
                     disable-default-u-i="true"
                     disable-double-click-zoom="true"
                     draggable="true"
                     keyboard-shortcuts="false"
                     tilt="45"
                     map-type-id="TERRAIN">
                    <marker ng-model="selected" id="selectMarker"
                            position="current-location"
                            title="This is your location Drag and click marker to change Finding location"
                            draggable="true"
                            visible="true"
                            animation="Animation.BOUNCE"
                            on-click="eventCtrl.marker(selected)"
                            icon=http://maps.google.com/mapfiles/ms/icons/blue-dot.png>
                    </marker>
                    <marker ng-repeat="position in eventCtrl.positions | filter: { amount: amountSelect }"
                            position="[{{position.lat}},{{position.lng}}]"
                            title="{{eventCtrl.event.name}} Richness {{position.amount}}"
                            draggable="false"
                            on-click="eventCtrl.selectMarker(selected)"
                            visible="true">
                    </marker>
                </map>
            </div>
        </div>

    </div>

    {{eventCtrl.error}}
    {{eventCtrl.message}}
    <div class="row">


        <form class="navbar-form col-md-5">
            <div class="panel-heading  "><h4>Create Finding</h4></div>
            <div class="input-group col-md-6">
                <select ng-model="amountSelect" class="btn btn-info">
                    <option value="" selected="selected">Select richness</option>
                    <option value="{{amount}}" ng-repeat="amount in eventCtrl.amounts">Richness {{amount}}</option>
                </select>
                <input value="{{eventCtrl.lat}}" type="text" class="form-control"
                       placeholder="Move blue marker and Click to set latitude/longitude or leave blank to save where your location is."
                       name="q">
                <input value="{{eventCtrl.lng}}" type="text" class="form-control"
                       placeholder="Move blue marker and Click to set latitude/longitude or leave blank to save where your location is.  "
                       name="q">
                <button class="btn btn-success" ng-click="eventCtrl.submitMarker(amountSelect)">Submit Finding</button>
            </div>
        </form>
        <div ng-if="loginScope.loginService.authorized">
            <form class="myform col-md-5" ng-if="eventCtrl.showBool">
                <div class="panel-heading  "><h4>Edit/Delete Finding</h4></div>
                <select data-ng-model="test" class="btn btn-success btn-sm">
                    <option value="{{amount}}" ng-selected="eventCtrl.selectedPosition.amount == amount"
                            ng-repeat="amount in eventCtrl.amounts">Richness {{amount}}
                    </option>
                </select>

                <div class="input-group col-md-6">
                    <input value="{{eventCtrl.selectedPosition.lat}}" type="text" class="form-control"
                           placeholder="Move blue marker and Click to set latitude/longitude or leave blank to save where your location is."
                           name="q">
                    <input value="{{eventCtrl.selectedPosition.lng}}" type="text" class="form-control"
                           placeholder="Move blue marker and Click to set latitude/longitude or leave blank to save where your location is.  "
                           name="q">
                    <button class="btn btn-success" ng-click="eventCtrl.updateMarker(test)">Edit Finding</button>
                    <button class="btn btn-danger" ng-click="eventCtrl.deleteMarker()">Delete Finding</button>
                </div>
            </form>
        </div>
    </div>
</div>





